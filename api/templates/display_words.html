{% from "navbar.html" import create_navbar with context%}
<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/bootstrap.css') }}">
    <style>
        .body-stuff {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }

        .form-background {
            background-color: #3498db;
        }

        .page-background {
            background-color: #dadbdc;
        }


        .flashcard-container {
            max-width: 30vw;
            width: 100%;
            margin-top: 20vh;
        }


        .flashcard {
            width: 100%;
            height: 33.3vh;
            /* Adjust height based on your content */
            transform-style: preserve-3d;
            transition: transform 0.5s;
            cursor: pointer;
        }

        .centering {
            margin: auto;
        }

        .front,
        .back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            color: #fff;
            background-color: #3498db;
            border-radius: 8px;
        }

        .arrow {
	--arrow-size: 5vw;
	--arrow-color: #3498db;
	--arrow-color-hover: #2b7db4;
	position: relative;
	display: inline-flex;
	vertical-align: middle;
	width: var(--arrow-size);
	height: var(--arrow-size);
	overflow: hidden;
    margin-top: 33.3vh;
	
	&::after {
		content: '';
		position: absolute;
		top: 50%;
		box-sizing: border-box;
		display: inline-block;
		width: calc( var(--arrow-size) * .7071);
		height: calc( var(--arrow-size) * .7071);
		border-top: calc( var(--arrow-size) / 5 ) solid var(--arrow-color);
		transition: all 150ms ease-in-out;
	}
	
	&.left {
		&::after {
			left: calc( var(--arrow-size) / 5 );
			border-left: calc( var(--arrow-size) / 5 ) solid var(--arrow-color);
			transform-origin: top left;
			rotate: -45deg;
		}

		&:hover::after {
			box-shadow: calc( var(--arrow-size) / -8 ) calc( var(--arrow-size) / -8 ) 0 var(--arrow-color);
		}
	}

	&.right {
		&::after {
			right: calc( var(--arrow-size) / 5 );
			border-right: calc( var(--arrow-size) / 5 ) solid var(--arrow-color);
			transform-origin: top right;
			rotate: 45deg;
		}

		&:hover::after {
			box-shadow: calc( var(--arrow-size) / 8 ) calc( var(--arrow-size) / -8 ) 0 var(--arrow-color);
		}
	}
}

a {
	&:hover .arrow {
		&.left,
		&.right {
			&::after {
				border-color: var(--arrow-color-hover);
			}
		}

		&.left {
			&::after {
				box-shadow: calc( var(--arrow-size) / -8 ) calc( var(--arrow-size) / -8 ) 0 var(--arrow-color);
			}
		}

		&.right {
			&::after {
				box-shadow: calc( var(--arrow-size) / 8 ) calc( var(--arrow-size) / -8 ) 0 var(--arrow-color);
			}
		}
	}
}


        .back {
            transform: rotateY(180deg);
        }
    </style>

    <head>
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/bootstrap.css') }}">
        <title>Display Word</title>
        <!-- Other head content -->
    </head>

<body class="page-background text-center">
    <input type="hidden" id="current_element_number" value=0>
    {{ create_navbar("display_words", "form-background") }}
    
    <div class="container centering">
        <div class="row">
            <div class="col">
                <div id="goToPreviousCardButton" style="text-align: right; display: none;">
                    <p onclick="goToPreviousCard()"><span class="arrow left"></span></p>
                </div>
            </div>
            <div class="col-6" align="center">
                {% if element_n != -1 %}
                <div class="flashcard-container" onclick="flipFlashcard()">
                    <div class="flashcard">
                        <div class="front">
                            <h2 id="word1" style="color: #fff; font-size: 3.2vw;">{{ words[element_n].word1 }}</h2> <!-- Display the word -->
                        </div>
                        <div class="back">
                            <h2 id="word2" style="color: #fff; font-size: 3.2vw;">{{ words[element_n].word2 }}</h2>
                            <!-- Display the translation -->
                        </div>
                    </div>
                </div>
                <!-- Next Button -->
                {% else %}
                    <h3>No words to display</h3>
                {% endif %}
            </div>
            <div class="col" align="center">
                <div id="goToNextCardButton" style="text-align: left;">
                    <p onclick="goToNextCard()"><span class="arrow right"></a></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        function flipFlashcard() {
            var flashcard = document.querySelector('.flashcard');
            flashcard.style.transform = flashcard.style.transform === 'rotateY(180deg)' ? 'rotateY(0deg)' : 'rotateY(180deg)';
        }

        function goToNextCard() {
            let current_element_number = document.getElementById("current_element_number").value;
            flashcard = document.querySelector('.flashcard');
            //flashcard.classList.add("fade");
            fetch('/next_word', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({current_element_number: current_element_number}),
            })
            .then(response => response.json())
            .then(data => {
                // Update all the necessary fields
                document.getElementById("word1").innerText = data.list_of_words[data.element_n].word1;
                document.getElementById("word2").innerText = data.list_of_words[data.element_n].word2;

                if (data.element_n == 1) // new element will not be the first
                    document.getElementById("goToNextCardButton").style.display = "block";

                document.getElementById("current_element_number").value = data.element_n;

                if (data.element_n == data.list_of_words.length - 1) // new element is the last
                    document.getElementById("goToNextCardButton").style.display = "none";

            })
        }

        function goToPreviousCard() {
            let current_element_number = document.getElementById("current_element_number").value;
            flashcard = document.querySelector('.flashcard');
            //flashcard.classList.add("fade");
            fetch('/next_word', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({current_element_number: current_element_number}),
            })
            .then(response => response.json())
            .then(data => {
                // Update all the necessary fields
                document.getElementById("word1").innerText = data.list_of_words[data.element_n].word1;
                document.getElementById("word2").innerText = data.list_of_words[data.element_n].word2;

                if (data.element_n == 0) // new element will not be the first
                    document.getElementById("goToNextCardButton").style.display = "block";

                document.getElementById("current_element_number").value = data.element_n;

                if (data.element_n == data.list_of_words.length - 1) // new element is the last
                    document.getElementById("goToNextCardButton").style.display = "none";

            })
        }
    </script>
</body>

</html>